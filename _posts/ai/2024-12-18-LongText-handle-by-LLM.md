# 大模型处理长文本实践 - 笔记助手

## Github Repository

[项目地址](https://github.com/IndigoBlueInChina/meetingsummary)

---

## 缘起

在 Upwork 上看到一个需求：在本地架设 LLM（大语言模型），并用 Python 脚本总结会议记录，避免将数据上传到云端，保护信息安全。受此启发，我决定开发一个笔记助手，结合用户本地部署的 LLM，实现笔记和会议记录的整理与总结，杜绝将敏感数据提交到云端。

---

## 需求分析

通过扩展分析用户的使用场景，得出以下需求：

1. **现场会议录音并转文字：**
   - 使用语音转文字技术，将录音转为文本。
   - 进一步通过 LLM 对文字进行校对与总结。

2. **录音内容分类场景：**
   - **会议场景**：使用 LLM 对会议内容进行总结。
   - **课堂场景**：使用 LLM 整理课堂笔记。

---

## 架构设计

### 核心架构
1. **LLM 本地部署：**  
   优选使用 **Ollama**，其简单易用，能够根据部署机器的性能选择不同参数量的模型。即使设备没有 GPU，也能通过 CPU 运行一些小模型，满足基本需求。

2. **应用开发：**  
   使用 Python 构建应用程序，完成以下功能：
   - 录音功能。
   - 语音转文字。
   - 调用 LLM 完成文字校对、会议总结、课堂笔记整理。

3. **平台限制：**  
   考虑到语音转文字和 LLM 调用的性能需求，应用仅支持 PC 端运行。用户可以使用移动设备录音后，将文件导入该应用，完成后续校对和总结工作。

---

### 开发框架选择
- **优点：**
  - Python 拥有丰富的 LLM SDK，方便调用和跨平台使用。
- **缺点：**
  - 在 UI 开发方面不如 Node.js 便捷。

- **综合评估：**
  - 如果前端使用 Node.js 开发 UI，后端用 Python 实现逻辑，会增加安装包体积和依赖量，增加开发和打包的复杂性。
  - 为了便利性和统一性，选择完全用 Python 开发。使用 **PyQt6** 实现跨平台的桌面应用 UI。

---

## 技术准备

1. **语音转文字：**  
   初步调查后选择阿里推出的 **SenseVoice** 模型，其语音识别能力优于其他模型（如 Winsper）。

2. **LLM 本地部署：**  
   使用 **Ollama** 配合 **Qwen2.5** 模型（默认 7B 参数），支持调用 OpenAI API。

3. **LLM 调用分块与 Prompt：**  
   - 对于长文本，必须先将内容切分成小块逐一处理，再通过模型完成总结。
   - 使用 Prompt 调用 LLM 校对每段文本，再对校对后的内容进行二次总结。
 

* 功能介绍：**
![](/experience/assets/images/posts/ai/meetingsummary/function.png)


* 录音功能：**
![](/experience/assets/images/posts/ai/meetingsummary/recording.png)



---

## 开发 Tips

1. **Prompt 调优：**  
   Prompt 的设计对模型的表现至关重要。同样的 Prompt，在不同模型（如 Qwen2.5 的 7B 和 14B）上会有不同的输出效果。因此，必须不断优化 Prompt，才能达到理想效果。

2. **工具使用心得：**  
   - 工具如 **Cursor**、**Windsurf** 在开发初期效率极高，但代码量增加后，管理和组织能力变得关键。如果管理不当，容易因模型幻觉或上下文缺失导致修改错误，反而降低效率。

3. **对程序员的要求提高：**  
   - AI 工具的引入显著提高了代码产出量，但也要求程序员具备更强的调试能力。尤其在出现问题时，快速定位问题并解决是关键。  
   - 目前 AI 工具无法解决所有问题，有时会陷入错误循环，需要人工介入。

---

## 优势与挑战

### 优势：
- 全流程本地处理，避免数据泄露风险。
- 通过 Ollama 支持 GPU 和 CPU，能适配多种设备性能。

### 挑战：
- Prompt 设计和调优是影响效果的核心。
- AI 工具的使用提升了效率，但也要求更高的代码管理和调试能力。

---

## 总结

笔记助手项目通过结合本地 LLM 部署与 Python 开发，能够提供安全、高效的笔记整理与会议总结功能。未来的优化方向包括 Prompt 设计调优、UI 体验改进，以及对新模型和工具的探索与整合。欢迎提出改进意见，共同完善笔记助手。

[项目地址](https://github.com/IndigoBlueInChina/meetingsummary)
